(function($,window){$.safeXDRBusca=function(url,parameters,complete){if(complete){get(url,parameters,complete)}else{getByImage(url,parameters)}};function getByImage(url,parameters){parameters.nocache=new Date().getTime();var imageSrc=url+"?"+$.param(parameters);var image=new Image();image.src=imageSrc}function get(url,parameters,complete){function parseAndInvokeCallback(response){try{response=JSON.parse(response)}catch(err){}complete(response)}if(isIE()){getByXDomainRequest(url,parameters,parseAndInvokeCallback)}else{getByAjaxBusca(url,parameters,parseAndInvokeCallback)}}function getByAjaxBusca(url,parameters,complete){$.ajax({url:url,type:"GET",async:false,data:parameters,cache:false,timeout:5000,success:function(response){complete(response)},error:function(){complete()}})}function getByXDomainRequest(url,parameters,complete){parameters.nocache=new Date().getTime();var xdr=new XDomainRequest();if(!xdr){return complete()}xdr.onload=function(){complete(xdr.responseText)};xdr.onerror=function(){complete()};xdr.onprogress=function(){};xdr.ontimeout=function(){complete()};xdr.timeout=500;xdr.open("GET",url+"?"+$.param(parameters));xdr.send()}function isIE(){return window.XDomainRequest}}(jQuery,window));!function(name,definition){if(typeof module!="undefined"){module.exports=definition()}else{if(typeof define=="function"&&typeof define.amd=="object"){define(definition)}else{this[name]=definition()}}}("kizzy",function(){function noop(){}var hasLocalStorage,doc=document,store=doc.domain,html5=0,writeThrough=function(){return 1};try{hasLocalStorage=!!localStorage||!!globalStorage;if(!localStorage){localStorage=globalStorage[store]}html5=1}catch(ex1){html5=0;try{if(doc.documentElement.addBehavior){html5=0;hasLocalStorage=1;var dataStore=doc.documentElement;dataStore.addBehavior("#default#userData");dataStore.load(store);var xmlDoc=dataStore.xmlDocument,xmlDocEl=xmlDoc.documentElement}}catch(ex2){hasLocalStorage=false}}var setLocalStorage=noop,getLocalStorage=noop,removeLocalStorage=noop,clearLocalStorage=noop;if(hasLocalStorage){setLocalStorage=html5?html5setLocalStorage:setUserData;getLocalStorage=html5?html5getLocalStorage:getUserData;removeLocalStorage=html5?html5removeLocalStorage:removeUserData;clearLocalStorage=html5?html5clearLocalStorage:clearUserData;writeThrough=function(inst){try{var v=JSON.stringify(inst._);if(v=="{}"){removeLocalStorage(inst.ns)}else{setLocalStorage(inst.ns,v)}return 1}catch(x){return 0}}}function time(){return +new Date()}function checkExpiry(inst,k){if(inst._[k]&&inst._[k].e&&inst._[k].e<time()){inst.remove(k)}}function isNumber(n){return typeof n==="number"&&isFinite(n)}function html5getLocalStorage(k){return localStorage[k]}function html5setLocalStorage(k,v){localStorage[k]=v;return v}function html5removeLocalStorage(k){delete localStorage[k]}function html5clearLocalStorage(){localStorage.clear()}function getNodeByName(name){var childNodes=xmlDocEl.childNodes,node,returnVal=null;for(var i=0,len=childNodes.length;i<len;i++){node=childNodes.item(i);if(node.getAttribute("key")==name){returnVal=node;break}}return returnVal}function getUserData(name){var node=getNodeByName(name);var returnVal=null;if(node){returnVal=node.getAttribute("value")}return returnVal}function setUserData(name,value){var node=getNodeByName(name);if(!node){node=xmlDoc.createNode(1,"item","");node.setAttribute("key",name);node.setAttribute("value",value);xmlDocEl.appendChild(node)}else{node.setAttribute("value",value)}dataStore.save(store);return value}function removeUserData(name){getNodeByName(name)&&xmlDocEl.removeChild(node);dataStore.save(store)}function clearUserData(){while(xmlDocEl.firstChild){xmlDocEl.removeChild(xmlDocEl.firstChild)}dataStore.save(store)}function _Kizzy(){this._={}}_Kizzy.prototype={set:function(k,v,optTtl){this._[k]={value:v,e:isNumber(optTtl)?time()+optTtl:0};writeThrough(this)||this.remove(k);return v},get:function(k){checkExpiry(this,k);return this._[k]?this._[k].value:undefined},remove:function(k){delete this._[k];writeThrough(this)},clear:function(){this._={};writeThrough(this)},clearExpireds:function(){for(var k in this._){checkExpiry(this,k)}writeThrough(this)}};function Kizzy(ns){this.ns=ns;this._=JSON.parse(getLocalStorage(ns)||"{}")}Kizzy.prototype=_Kizzy.prototype;function kizzy(ns){return new Kizzy(ns)}kizzy.remove=removeLocalStorage;kizzy.clear=clearLocalStorage;return kizzy});(function(global){var ONE_DAY_EXPIRATION_TIME=86400000;var abBusca={server:"http://globo-ab.globo.com/",get:function(parameters,callback){var experimentName=parameters.experiment;var defaultValue=parameters.defaultValue;var key,userId;if(parameters.userId){userId=parameters.userId;key="user"+userId+":"+experimentName}else{key="ab:"+experimentName}var url=abBusca.server+"ab/"+experimentName;var requestParameters={};if(userId){requestParameters.user_id=userId}$.safeXDRBusca(url,requestParameters,function(response){if(response){setCache(key,response);callback(response.result)}else{returnCacheIfError(key,defaultValue,callback)}})},getCookie:function(c_name){var i,x,y,ARRcookies=document.cookie.split(";");for(i=0;i<ARRcookies.length;i++){x=ARRcookies[i].substr(0,ARRcookies[i].indexOf("="));y=ARRcookies[i].substr(ARRcookies[i].indexOf("=")+1);x=x.replace(/^\s+|\s+$/g,"");if(x==c_name){return unescape(y)}}},setCookie:function(c_name,value,exdays){var exdate=new Date();exdate.setDate(exdate.getDate()+exdays);var c_value=escape(value)+((exdays==null)?"":"; expires="+exdate.toUTCString());document.cookie=c_name+"="+c_value},getUid:function(){return(S4()+S4()+"-"+S4()+"-"+S4()+"-"+S4()+"-"+S4()+S4()+S4())},conversion:function(parameters){var url=abBusca.server+"convert/"+parameters.experiment+"/"+parameters.version;$.safeXDRBusca(url,{})}};function returnCacheIfError(key,defaultValue,callback){var response=getCache(key)||{result:defaultValue};callback(response.result)}function getCache(key){return cache().get(key)}function setCache(key,value){cache().set(key,value,ONE_DAY_EXPIRATION_TIME)}function cache(){return kizzy("globoABBusca")}function S4(){return(((1+Math.random())*65536)|0).toString(16).substring(1)}global.globoABBusca=abBusca}(this));(function($){var version="3.3.4";var defaults={qtd_min_letras_pro_suggest:2,qtd_min_letras_pra_busca:2,qtdMax:10,delay:200,urlBusca:"http://busca.globo.com",suggest_ligado:false,msg_busca_fixa:undefined};var options;var cortinaAberta=false;var itemSelecionado="";var timerId=null;var meu_texto=null;var liAtual=-1;var urls={};var paginaDeResultados=false;var buscaSimples=false;var buscaWeb=false;var buscaHome=false;var urlGloboAb="http://globoesporte.globo.com/busca/";$.fn.buscaPadrao=function(user_options){$.buscaPadrao.CacheLocal.init();$.buscaPadrao.setOptions(user_options);$.buscaPadrao.produto=options.produto;if($.buscaPadrao.produto===""||$.buscaPadrao.produto===null||$.buscaPadrao.produto===undefined){$.buscaPadrao.produto="globo"}if(options.buscaSimples!==undefined){buscaSimples=options.buscaSimples}buscaWeb=options.buscaWeb;paginaDeResultados=options.paginaDeResultados;buscaHome=options.buscaHome;$.configuraUrls(user_options);$.criaComponentes($(this));$("#busca-campo").bind({focus:$.focusCampoDeBusca,blur:$.blurCampoDeBusca,keypress:$.keyPressCampoDeBusca,keyup:$.keyUpCampoDeBusca});$("#frmBusca").bind("submit",function(event){_gaq.push(["b._trackEvent","Busca - Default","enter",$("#busca-campo").val()]);if($.buscaPadrao.produto=="GloboEsporte"){var user_id=globoABBusca.getCookie("user_id_busca");if(user_id==null||user_id==""||user_id==undefined){user_id=globoABBusca.getUid();kizzy("globoABBusca").clear();globoABBusca.setCookie("user_id_busca",user_id,365)}globoABBusca.get({experiment:"globoEsporteBusca",defaultValue:"http://globoesporte.globo.com/busca/",userId:user_id},function(url){urlGloboAb=url;var action=$("#frmBusca").attr("action");if(urlGloboAb=="http://globoesporte.globo.com/busca/"&&action.slice(action.length-10)!="/Busca/web"&&action.slice(action.length-7)!="/Busca/"){$("#frmBusca").attr("action",urlGloboAb);$("#busca-campo").attr("name","q");$.clickBotaoBuscar(event,urlGloboAb)}})}$.clickBotaoBuscar(event)})};$.buscaPadrao=function(options){$("#busca-padrao").buscaPadrao(options)};$.configuraUrls=function(user_options){var url=options.urlBusca+"/Busca/"+$.buscaPadrao.produto+"/";urls={buscaSuggest:options.urlBusca+"/suggest?produto="+$.buscaPadrao.produto+"&callback=?",buscaGloboCom:options.urlBusca+"/Busca/",buscaProduto:url,buscaGoogle:options.urlBusca+"/Busca/web"}};$.criaComponentes=function(div){var divContainer=div;var msgAlerta="";msgAlerta+='<div class="msg-feedback">';msgAlerta+='      <a href="" ><img src="http://s.glbimg.com/bu/i/feedback_busca-x.png" alt="fechar" class="fechar" /></a>';msgAlerta+='      <img src="http://s.glbimg.com/bu/i/feedback_busca-seta.png" alt="" class="seta" />';msgAlerta+='      <img src="http://s.glbimg.com/bu/i/feedback_busca-icone.png" alt="atenção" class="icone" />';msgAlerta+='      <p class="aviso"><span>Busca não realizada!</span></p>';msgAlerta+='      <p class="descricao">Sua busca deve conter no m&iacute;nimo '+options.qtd_min_letras_pra_busca+" letras</p>";msgAlerta+="</div>";var formulario='<form name="busca-padrao" id="frmBusca" action="'+urls.buscaProduto+'" method="get" accept-charset="utf-8"></form>';var fieldset="<fieldset></fieldset>";var textoBusca="buscar";var cantoEsquerdo="";var campoDeBusca='<input type="text" class="'+classBuscaSimples+'" name="query" id="busca-campo" autocomplete="off"/>';var botao='<button class="'+classBuscaSimples+'" type="submit">'+textoBusca+"</button>";var lupa='<label for="busca-campo" class="lupa">Buscar</label>';var classBuscaSimples="";formulario='<form name="busca-padrao" id="frmBusca" action="'+urls.buscaProduto+'" method="get" accept-charset="utf-8"></form>';if(paginaDeResultados){$("head").append('<link rel="stylesheet" type="text/css" media="screen" href="http://s.glbimg.com/bu/c/busca.padrao.suggest.PaginaDeResultados.css" />');$(".lupa","#busca-padrao").css({background:"url(http://s.glbimg.com/bu/i/input_label_grande.png) no-repeat"});$("button","#busca-padrao").css({background:"url(http://s.glbimg.com/bu/i/botao_grande.png) no-repeat"});$(divContainer).append(msgAlerta)}else{if(buscaWeb){$("head").append('<link rel="stylesheet" type="text/css" media="screen" href="http://s.glbimg.com/bu/c/busca.padrao.suggest.PaginaBuscaWeb.css" />');$(".lupa","#busca-padrao").css({background:"url(http://s.glbimg.com/bu/i/input_label_grande.png) no-repeat"});$("button","#busca-padrao").css({background:"url(http://s.glbimg.com/bu/i/botao_grande.png) no-repeat"});$(divContainer).append(msgAlerta)}else{if(buscaHome){if($.buscaPadrao.produto==="globo"){formulario='<form name="busca-padrao" id="frmBusca" action="'+urls.buscaGloboCom+'" method="get" accept-charset="utf-8"></form>'}$(divContainer).append(formulario);$("form:first",divContainer).append(fieldset);if(!buscaSimples){lupa='<label for="busca-campo" class="lupa">Buscar</label>';$("fieldset",divContainer).append(lupa)}else{cantoEsquerdo='<label for="query" class="cantoEsquerdo">'+textoBusca+"</label>";$("fieldset",divContainer).append(cantoEsquerdo)}botao='<button class="'+classBuscaSimples+'" type="submit"></button>';$("fieldset",divContainer).append(campoDeBusca);$("fieldset",divContainer).append(botao);$(divContainer).append(msgAlerta)}else{if(buscaSimples){textoBusca="";classBuscaSimples="buscaSimples"}$("head").append('<link rel="stylesheet" type="text/css" media="screen" href="http://s.glbimg.com/bu/c/busca.padrao.suggest.css" />');if($.buscaPadrao.produto==="globo"){formulario='<form name="busca-padrao" id="frmBusca" action="'+urls.buscaGloboCom+'" method="get" accept-charset="utf-8"></form>'}$(divContainer).append(formulario);$("form:first",divContainer).append(fieldset);if(!buscaSimples){lupa='<label for="busca-campo" class="lupa">Buscar</label>';$("fieldset",divContainer).append(lupa)}else{cantoEsquerdo='<label for="query" class="cantoEsquerdo">'+textoBusca+"</label>";$("fieldset",divContainer).append(cantoEsquerdo)}$("fieldset",divContainer).append(campoDeBusca);$("fieldset",divContainer).append(botao);$(divContainer).append(msgAlerta)}}}var sugestoes='<div id="sugestoes"></div>';var listaSugestoes="<ul></ul>";$("#busca-padrao").append(sugestoes);$("#sugestoes").append(listaSugestoes);$("#busca-campo").val(options.msgProduto);$("#busca-campo").addClass("estadoInicial");$.buscaPadrao.fechaCortina();var _divContainer=$(divContainer);$("#sugestoes > ul > li",_divContainer).live("mouseover",function(){itemSelecionado=$(this).text()});$("#sugestoes > ul > li.resposta",_divContainer).live("mousedown",function(e){if(!$(this).hasClass("featuredContent")){$.buscaPadrao.executaBusca(itemSelecionado,urls)}});$("#sugestoes > ul > li.featuredContent",_divContainer).live("mousedown",function(e){var url=$(":last",this).attr("href");var nome=$(":last",this).text();var keystroke=$("#busca-padrao #busca-campo").val();$("#busca-padrao #busca-campo").val(nome);_gaq.push(["b._trackEvent","Busca - Featured",nome,keystroke]);window.location=url})};$.buscaSugestoes=function(texto){if(options.suggest_ligado){meu_texto=texto;var texto_normalizado=$.buscaPadrao.normalizaBusca(texto);if(texto===null||texto===""||texto_normalizado===""){return false}var resultadoNoCache=$.buscaPadrao.CacheLocal.recuperaBuscaCacheada(meu_texto);if(resultadoNoCache===""){$.ajax({contentType:"application/x-www-form-urlencoded; charset=UTF-8",url:urls.buscaSuggest,dataType:"jsonp",type:"GET",data:"query="+texto_normalizado,success:function(data,textStatus){$.buscaPadrao.tratarItens(meu_texto,data.itens);$.buscaPadrao.atualizaCortina(urls)}})}else{$.buscaPadrao.resultado=resultadoNoCache;$.buscaPadrao.atualizaCortina(urls)}}else{return[]}};$.clickBotaoBuscar=function(event,actionURL){var texto=$("#busca-campo").val();if(texto===options.msgProduto||texto===""||texto.length<options.qtd_min_letras_pra_busca){event.preventDefault();$.exibeMsgAlerta()}else{event.preventDefault();var actionURL=actionURL||$("#frmBusca").attr("action");var q=$("#busca-campo").attr("name");var value=$("#busca-campo").val();var paremetros={};paremetros[q]=value;document.location=actionURL+"?"+$.param(paremetros)}};$.exibeMsgAlerta=function(){$(".msg-feedback:first").fadeIn("fast",function(){$("#busca-campo").blur();$("a:first",".msg-feedback").focus();intervalo=setTimeout(function(){clearInterval(intervalo);$.ocultaMsgAlerta()},6000)});$("a",".msg-feedback").live("click",function(e){$(".msg-feedback:first").css("display","none");$("#busca-campo").focus();e.preventDefault()});if(buscaSimples){$(".icone:first",".msg-feedback").remove();$(".msg-feedback").css("width","188px");$("p:first",".msg-feedback").css("padding","0 0 0 10px");$("p:last",".msg-feedback").css("padding","0 10px 0 10px").text("Digite no m&iacute;nimo "+options.qtd_min_letras_pra_busca+" letras.")}if(buscaWeb){$(".msg-feedback").css("margin","0 0 0 0")}};$.ocultaMsgAlerta=function(){$("#busca-campo").focus();$(".msg-feedback:first").fadeOut("fast")};$.focusCampoDeBusca=function(event){var valorCampo=$("#busca-campo").val();if(valorCampo===options.msgProduto){$("#busca-campo").val("")}if(paginaDeResultados){$(event.target).css("background-position","0px -42px")}else{if(buscaWeb){$(event.target).css("background-position","0px -42px")}else{if(buscaHome){$(event.target).addClass("widget-busca-focus");$("label.lupa","#busca-padrao").css("background","url(http://s.glbimg.com/bu/i/busca_campo_sprite.png) repeat-x left -78px");$("input.widget-busca-focus","#busca-padrao").css("background","url(http://s.glbimg.com/bu/i/busca_campo_sprite.png) repeat-x left -117px")}else{$(event.target).css("background-position","0px -35px")}}}$("#busca-campo").removeClass("estadoInicial");if(!buscaHome){$("#busca-padrao label.lupa").css("background-position","left bottom")}$(".msg-feedback:first").css("display","none")};$.blurCampoDeBusca=function(event){$.buscaPadrao.fechaCortina();var valorCampo=$("#busca-campo").val();if(valorCampo===""){$("#busca-campo").val(options.msgProduto);$("#busca-campo").addClass("estadoInicial")}if(buscaHome){$(event.target).removeClass("widget-busca-focus");$("input","#busca-padrao").css("background","url(http://s.glbimg.com/bu/i/busca_campo_sprite.png) repeat-x left -39px");$("label.lupa","#busca-padrao").css("background","url(http://s.glbimg.com/bu/i/busca_campo_sprite.png) repeat-x left 0px")}else{$(event.target).css("background-position","0px -1px");$("#busca-padrao label.lupa").css("background-position","left top")}};$.keyPressCampoDeBusca=function(event){if(event.keyCode===13){if($(event.target).val().length<options.qtd_min_letras_pra_busca){$.exibeMsgAlerta();event.preventDefault()}var li=$(".sugestao-hover");if(li.hasClass("buscaFixa")){$.buscaPadrao.executaBuscaFixaNoEnter(urls,li);$.buscaPadrao.fechaCortina();return false}if(li.hasClass("resposta")){var texto_campo=li.text();$.buscaPadrao.executaBusca(texto_campo,urls);event.preventDefault();return false}if(li.hasClass("featuredContent")){var url=$("a",li).attr("href");var nome=$("a",li).text();var keystroke=$("#busca-padrao #busca-campo").val();$("#busca-padrao #busca-campo").val(nome);_gaq.push(["b._trackEvent","Busca - Featured",nome,keystroke]);window.location=url;return false}event.preventDefault();_gaq.push(["b._trackEvent","Busca - Default","enter",$("#busca-campo").val()]);$("#busca-padrao #frmBusca").submit()}};$.keyUpCampoDeBusca=function(event){if(buscaSimples){return}var quantidadeDeLi=$("li","#sugestoes ul").length;var busca=$.trim($("#busca-campo").val());if(busca.length>=options.qtd_min_letras_pro_suggest){$.buscaPadrao.abreCortina(busca,urls);if(event.keyCode!==40&&event.keyCode!==38&&event.keyCode!==27&&event.keyCode!==13){if(timerId){clearTimeout(timerId)}timerId=setTimeout(function(){$.buscaSugestoes(busca)},options.delay)}}else{$.buscaPadrao.fechaCortina()}if(event.keyCode===27){$.buscaPadrao.fechaCortina()}if(event.keyCode===40){var ultimo=quantidadeDeLi-1;if(liAtual<ultimo){liAtual=liAtual+1;$("a","#sugestoes ul li:eq("+(liAtual-1)+")").css("color","#333");$("a","#sugestoes ul li:eq("+liAtual+")").css("color","#fff");if(liAtual===0){$("#sugestoes ul li:eq("+liAtual+")").addClass("sugestao-hover")}else{if(liAtual===ultimo){$("#sugestoes ul li:eq("+ultimo+")").addClass("sugestao-hover")}else{$("#sugestoes ul li:eq("+liAtual+")").addClass("sugestao-hover");$("#sugestoes ul li:eq("+(liAtual-1)+")").removeClass("sugestao-hover")}}if($("#sugestoes ul li:eq("+liAtual+")").hasClass("buscaFixa")){$("#sugestoes ul li:eq("+liAtual+")").addClass("buscaFixaHover")}}else{$("#sugestoes ul li:eq("+ultimo+")").addClass("sugestao-hover");if($("#sugestoes ul li:eq("+liAtual+")").hasClass("buscaFixa")){$("#sugestoes ul li:eq("+liAtual+")").addClass("buscaFixaHover")}}}if(event.keyCode===38){if(liAtual>0){liAtual=liAtual-1;$("a","#sugestoes ul li:eq("+(liAtual+1)+")").css("color","#333");$("a","#sugestoes ul li:eq("+liAtual+")").css("color","#fff");if(liAtual===$("#sugestoes ul li").length){$("#sugestoes ul li:eq("+liAtual+")").addClass("sugestao-hover")}else{$("#sugestoes ul li:eq("+liAtual+")").addClass("sugestao-hover");$("#sugestoes ul li:eq("+(liAtual+1)+")").removeClass("sugestao-hover")}if($("#sugestoes ul li:eq("+liAtual+")").hasClass("buscaFixa")){$("#sugestoes ul li:eq("+liAtual+")").addClass("buscaFixaHover")}}}};$.buscaPadrao.normalizaBusca=function(texto){var afrom="á,à,ã,â,ä,Á,À,Ã,Â,Ä";var efrom="é,è,ê,ë,É,È,Ê,Ë";var ifrom="í,ì,î,ï,Í,Ì,Î,Ï";var ofrom="ó,ò,õ,ô,ö,Ó,Ò,Õ,Ô,Ö";var ufrom="ú,ù,û,ü,Ú,Ù,Û,Ü";var outrosfrom="ñ,Ñ,ç,Ç,&,@";var from=afrom+","+efrom+","+ifrom+","+ofrom+","+ufrom+","+outrosfrom;var ato="a,a,a,a,a,A,A,A,A,A";var eto="e,e,e,e,E,E,E,E";var ito="i,i,i,i,I,I,I,I";var oto="o,o,o,o,o,O,O,O,O,O";var uto="u,u,u,u,U,U,U,U";var outrosto="n,N,c,C,e,a";var to=ato+","+eto+","+ito+","+oto+","+uto+","+outrosto;var re=new RegExp("[^A-Za-z0-9.,:;!?\"'&@+*/#%=()_-]+","g");var quaseTerminada=$.buscaPadrao.__transliterate__(texto,from,to).replace(re," ").toLowerCase();var terminada=quaseTerminada;if(quaseTerminada.length>options.qtdMax){terminada=quaseTerminada.substring(0,options.qtdMax)}return $.trim(terminada)};$.buscaPadrao.__transliterate__=function(texto,from,to){var fromChars=from.split(",");var toChars=to.split(",");var mapTable={};for(var i=0;i<fromChars.length;i++){var c=i<toChars.length?toChars[i]:"";mapTable[fromChars[i]]=c}var re=new RegExp(fromChars.join("|"),"gi");texto=texto.replace(re,function(c){return mapTable[c]});return texto};$.buscaPadrao.atualizaCortina=function(urls){$("#sugestoes > ul > li.resposta").remove();$("#sugestoes > ul > li.featuredContent").remove();$("#sugestoes > ul > li.textoSugestoes").remove();var qtdMaxComUmaBuscaFixa=10;var qtdMaxComDuasBuscasFixas=10;var itensParaApendar="";var listaDeFeaturedContents="";var qtdMaxDeFeaturedContents=5;var qtdDeFeaturedContent=0;var qtdDeSugestoes=0;var nomesDeFeaturedContentJaInseridos=[];var resultadoDoMatcher=$.buscaPadrao.sort($.buscaPadrao.resultado);$.each(resultadoDoMatcher,function(indice,valor){var qtdMax=($.buscaPadrao.produto==="globo"||$.buscaPadrao.produto==="beta")?qtdMaxComUmaBuscaFixa:qtdMaxComDuasBuscasFixas;var nomeFeaturedContent="";var urlFeaturedContent="";var imgPequenaFeaturedContent="";var valores=String(valor).split(";");if(valores.length>=3){nomeFeaturedContent=valores[0];urlFeaturedContent=valores[1];imgPequenaFeaturedContent=valores[2];var temFeaturedContentIgual=false;$.each(nomesDeFeaturedContentJaInseridos,function(e,v){if(imgPequenaFeaturedContent===v){temFeaturedContentIgual=true}});if(!temFeaturedContentIgual){nomesDeFeaturedContentJaInseridos.push(imgPequenaFeaturedContent);if(qtdDeFeaturedContent<qtdMaxDeFeaturedContents){listaDeFeaturedContents=listaDeFeaturedContents+'<li class="featuredContent"><div class="imgPequenaFeaturedContent"><img src="'+imgPequenaFeaturedContent+'" alt="'+nomeFeaturedContent+'" width="45px" height="34px" /></div><a href="'+urlFeaturedContent+'" class="linkFeaturedContent">'+nomeFeaturedContent+"</a></li>";qtdDeFeaturedContent+=1}}if(qtdDeFeaturedContent===qtdMaxDeFeaturedContents){qtdMaxComDuasBuscasFixas=8}else{qtdMaxComDuasBuscasFixas=10}}else{qtdDeSugestoes+=1;if(qtdDeSugestoes<=qtdMax){itensParaApendar=itensParaApendar+'<li class="resposta">'+valores[0]+"</li>"}}});var textoSugestoes='<li class="textoSugestoes">Sugestões de busca</li>';if(itensParaApendar!==""){$("#sugestoes > ul").prepend(textoSugestoes+itensParaApendar)}else{$("#sugestoes > ul").prepend(itensParaApendar)}$("#sugestoes > ul").prepend(listaDeFeaturedContents);itensParaApendar="";listaDeFeaturedContents="";$.buscaPadrao.aplicaDetalhes();$.buscaPadrao.setaComportamentosMouse(urls)};$.buscaPadrao.sort=function(array){var retorno="";var sortLevandoEmConsideracaoLocale=function(string1,string2){var string1ehfeature=String(string1).split(";").length===3;var string2ehfeature=String(string2).split(";").length===3;if(string1ehfeature&&string2ehfeature){return String(string1).split(";")[0].toString().localeCompare(String(string2).split(";")[0].toString())}else{if(string1ehfeature){return String(string1).split(";")[0].toString().localeCompare(string2.toString())}else{if(string2ehfeature){return string1.toString().localeCompare(String(string2).split(";")[0].toString())}else{return string1.toString().localeCompare(string2.toString())}}}};retorno=array.sort(sortLevandoEmConsideracaoLocale);return retorno};$.buscaPadrao.aplicaDetalhes=function(){$(".featuredContent:first").css("margin-top","0px").css("padding-top","5px");$(".featuredContent:last").css("margin-bottom","0px").css("padding-bottom","5px");$(".resposta:last").css("padding-bottom","8px");if($(".featuredContent").length!==0){}};$.buscaPadrao.executaBusca=function(texto,urls){var keystroke=$("#busca-padrao #busca-campo").val();$("#busca-padrao #busca-campo").val(texto);if($.buscaPadrao.produto==="globo"){$("#busca-padrao #frmBusca").attr("action",urls.buscaGloboCom)}else{$("#busca-padrao #frmBusca").attr("action",urls.buscaProduto)}_gaq.push(["b._trackEvent","Busca - Suggest",texto,keystroke]);$("#busca-padrao #frmBusca").submit()};$.buscaPadrao.abreCortina=function(texto,urls){if(!cortinaAberta){$("#sugestoes").show();cortinaAberta=true}$.buscaPadrao.atualizaBuscaFixa(texto,urls);$.buscaPadrao.setaComportamentosMouse(urls)};$.buscaPadrao.atualizaBuscaFixa=function(texto,urls){$("#sugestoes > ul > li.buscaFixa").remove();var texto_tratado=texto;if(texto.length>18){texto_tratado=texto.substring(0,18)+"..."}$.buscaPadrao.adicionaBuscaFixaDoProduto(texto,texto_tratado);$.buscaPadrao.adicionaBuscaFixaGoogle(texto,texto_tratado);$.buscaPadrao.adicionaBuscaGlobocomQuandoProdutoForWeb(texto,texto_tratado)};$.buscaPadrao.adicionaBuscaFixaDoProduto=function(texto,texto_tratado){if($.buscaPadrao.produto!=="beta"&&$.buscaPadrao.produto!=="web"){if(options.msg_busca_fixa){$("#sugestoes > ul").append('<li class="buscaFixa" rel="'+options.msg_busca_fixa+'"><a href="'+urls.buscaProduto+"\"><label>buscar '<em>"+texto_tratado+"</em>' <span>"+texto+"</span> "+options.msg_busca_fixa+" ›</label></a></li>")}$("#sugestoes > ul").append('<li class="buscaFixa" rel="Globo"><a href="'+urls.buscaGloboCom+"\"><label>buscar '<em>"+texto_tratado+"</em>' <span>"+texto+"</span>na Globo.com ›</label></a></li>")}};$.buscaPadrao.adicionaBuscaFixaGoogle=function(texto,texto_tratado){$("#sugestoes > ul").append('<li class="buscaFixa" rel="Web"><a href="'+urls.buscaGoogle+"\"><label>buscar '<em>"+texto_tratado+"</em>' <span>"+texto+"</span>na Web ›</label></a></li>")};$.buscaPadrao.adicionaBuscaGlobocomQuandoProdutoForWeb=function(texto,texto_tratado){if($.buscaPadrao.produto=="web"){$("#sugestoes > ul").append('<li class="buscaFixa" rel="Globo"><a href="'+urls.buscaGloboCom+"\"><label>buscar '<em>"+texto_tratado+"</em>' <span>"+texto+"</span>na Globo.com ›</label></a></li>")}};$.buscaPadrao.fechaCortina=function(){$(".textoSugestoes","#sugestoes").css("display","none");$("ul","#sugestoes").empty();$("#sugestoes").hide();cortinaAberta=false};$.buscaPadrao.executaBuscaFixaNoEnter=function(urls,li){var enderecoBusca=$("a",li).attr("href");var valorDaBusca=$("a > label > span",li).text();var keystroke=$("#busca-campo").val();$("#busca-campo").val(valorDaBusca);$("#frmBusca").attr("action",enderecoBusca);var opcao_busca_fixa=$(li).attr("rel");_gaq.push(["b._trackEvent","Busca - Option",opcao_busca_fixa,keystroke]);$("#frmBusca").submit()};$.buscaPadrao.executaBuscaFixa=function(urls,clickedItem){var clickedLink=clickedItem.find("a");var endereco=clickedLink.attr("href");var valorBusca=clickedLink.find("> label > span").text();var keystroke=$("#busca-campo").val();$("#busca-campo").val(valorBusca);$("#frmBusca").attr("action",endereco);var opcao_busca_fixa=$(clickedItem).attr("rel");_gaq.push(["b._trackEvent","Busca - Option",opcao_busca_fixa,keystroke]);$("#frmBusca").submit()};$.buscaPadrao.produto="globo";$.buscaPadrao.resultado=[];$.buscaPadrao.CacheLocal={cache:{},init:function(){this.cache={}},recuperaBuscaCacheada:function(textoBuscado){var resultadoTextoBuscado=this.cache[textoBuscado];if(resultadoTextoBuscado===undefined||resultadoTextoBuscado===""||resultadoTextoBuscado===null){return""}else{return resultadoTextoBuscado}},cachearBusca:function(textoBuscado,resultado){this.cache[textoBuscado]=resultado},limparCache:function(chave){if(chave||chave!==undefined||chave!==""){this.cache[chave]=undefined}else{this.cache={}}}};$.buscaPadrao.tratarItens=function(texto,itens){var array=[];if(itens!==null){$.each(itens,function(){$.each(this,function(){array.push(this)})})}$.buscaPadrao.CacheLocal.cachearBusca(texto,array);$.buscaPadrao.resultado=array;return array};$.buscaPadrao.setaComportamentosMouse=function(urls){$("#sugestoes > ul > li").addClass("sugestao");$("#sugestoes > ul > li").mouseover(function(){$("#sugestoes > ul > li.sugestao-hover").removeClass("sugestao-hover");$("#sugestoes > ul > li.buscaFixaHover").removeClass("buscaFixaHover");$("#sugestoes > ul > li.textoSugestoes").removeClass("sugestao-hover");$(this).addClass("sugestao-hover");if($(this).hasClass(".textoSugestoes")){$(this).removeClass("sugestao-hover")}if($(this).hasClass("featuredContent")){$("a",this).css("color","#fff")}if($(this).hasClass("buscaFixa")){$(this).addClass("buscaFixaHover")}});$("#sugestoes > ul > li").mouseout(function(){$("#sugestoes > ul > li.sugestao-hover").removeClass("sugestao-hover");$("#sugestoes > ul > li.buscaFixaHover").removeClass("buscaFixaHover");$(this).addClass("sugestao");if($(this).hasClass("featuredContent")){$("a",this).css("color","#333")}if($(this).hasClass("buscaFixa")){$(this).removeClass("buscaFixaHover")}});$("#sugestoes > ul > li.buscaFixa").unbind("click").bind("click",function(){return false}).unbind("mousedown").mousedown(function(){$("#busca-campo").attr("name","query");$.buscaPadrao.executaBuscaFixa(urls,$(this));return false})};$.buscaPadrao.setOptions=function(new_options){options=$.extend({},defaults,options,new_options)}})(jQuery);