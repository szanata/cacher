(function($){$.fn.widgetPrevisaoDoTempo=function(params){var options={url:'http://api.g1.globo.com/tempo/cidade-resumida/rj/rio-de-janeiro.jsonp'};var op=$.extend(options,params);var $target=$(this);var $abrirFechar=$('.widget-titulo span a',$target);var $listaCidades=$('.lista-cidades',$target);var $itemCidade=$('.widget-previsao-tempo .lista-cidades li');$abrirFechar.click(function(){if(!$(this).parent().hasClass('fechar')){$listaCidades.show();$(this).attr('title','fechar').html('fechar');$(this).parent().addClass('fechar');}else{$listaCidades.hide();$(this).attr('title','+ cidades').html('+ cidades');$(this).parent().removeClass('fechar');}
return false;});$itemCidade.click(function(){var href=$('a',this).attr('href');var url=href.replace('previsao-do-tempo','');$('.rodape a',$target).attr('href','http://g1.globo.com/'+href+'.html');recuperarDados('http://api.g1.globo.com/tempo/cidade-resumida'+url+'.jsonp');$('.widget-previsao-tempo .widget-titulo span a').click();return false;});tratarTemperatura=function(temperatura,tamanho){var temperaturaString=temperatura+'';var temp=temperaturaString.split('');var temperaturaFinal="";var contador=0;var medida='<span class="medida"></span>';if(temp.length>1){if(temp[0]=="-"){var negativa='<span class="negativa"></span>';for(i=1;i<temp.length;i++){temperaturaFinal+='<span class="temperatura-padrao temperatura-'+tamanho+'-'+temp[i]+'"></span>';}
return negativa+temperaturaFinal+medida;}else{for(i=0;i<temp.length;i++){temperaturaFinal+='<span class="temperatura-padrao temperatura-'+tamanho+'-'+temp[i]+'"></span>';}
return temperaturaFinal+medida;}}else{return'<span class="temperatura-padrao temperatura-'+tamanho+'-'+temp[0]+'"></span><span class="medida"></span>';}};popularWidget=function(data){var imagem=data.previsoes[0].icone;var nome=data.nome;var prefixo=data.prefixo;var frase=data.previsoes[0].frase;var maxima=tratarTemperatura(data.previsoes[0].temperatura.maxima,'g');var minima=tratarTemperatura(data.previsoes[0].temperatura.minima,'g');$('.conteudo',$target).html('<div class="clima">'+'    <div class="midia-padrao midia-p-'+imagem+'"></div>'+'    <strong>'+nome+', '+prefixo+'</strong>'+'    <p>'+frase+'</p>'+'</div>'+'<div class="medidas">'+'    <div class="maxima"><span class="max">M√ÅX</span> '+maxima+'</div>'+'    <div class="minima">'+minima+' <span class="min">MIN</span></div>'+'</div>');$('.conteudo',$target).removeClass('carregando');};recuperarDados=function(url){$.ajax({url:url,type:"GET",dataType:"jsonp",jsonp:false,jsonpCallback:"g1_previsao_cidade",success:function(data){popularWidget(data);},error:function(){$target.hide();}});};recuperarDados(op.url);};})(jQuery);(function(global,$){var widthAtivo=28;var widthInativo=2;var opaco={opacity:1};var semiOpaco={opacity:0.8};var invisivel={opacity:0};var ativo={width:widthAtivo};var inativo={width:widthInativo};var ativoOpaco={width:widthAtivo,opacity:1};var ativoTranslucido={width:widthAtivo,opacity:0.5};var inativoOpaco={width:widthInativo,opacity:1};$.widget('glb.carrossel',{options:{identificador:'libbycarrossel',duracaoAnimacao:200,intervalo:6000,indiceInicial:0,zIndex:99},_create:function(){this.timer=null;this.indice=this.options.indiceInicial;this.passos=this.element.find('div.glb-carrossel-passo');this.numeroDePassos=this.passos.length;this.navegacao=this.element.find('div.glb-carrossel-navegacao');this.tituloFundo=this.element.find('span.glb-carrossel-titulo-fundo');this.itensNavegacaoLi=this.navegacao.find('li');this.itensNavegacao=this.navegacao.find('a');this.itensNavegacaoBg=this.itensNavegacao.filter('.glb-carrossel-navegacao-item-bg');this.itensNavegacaoBgAtivo=this.itensNavegacao.filter('.glb-carrossel-navegacao-item-bg-ativo');this.thumbs=this.element.find('div.glb-carrossel-thumb');this.primeiraAnimacao=true;this._ativar();this.iniciarCiclo();this._adicionarEventosNavegacao();this._adicionarEventosHover();this._setarAltura();},_setarAltura:function(){if(this.element.hasClass('glb-carrossel-passos-compacto')){return;}
var alturas=this.passos.map(function(){return $(this).height();}).get();var maiorAltura=Math.max.apply(Math.max,alturas);this.element.height(maiorAltura);},iniciarCiclo:function(){if(this.timer){return;}
this.timer=setInterval($.proxy(this.incrementaPasso,this),this.options.intervalo);},cancelarCiclo:function(){clearInterval(this.timer);this.timer=null;},_ativar:function(){var primeiroBgAtivo=this.itensNavegacaoBgAtivo.first();primeiroBgAtivo.css('width',primeiroBgAtivo.css('width'));this.itensNavegacaoLi.first().removeClass('glb-carrossel-navegacao-item-ativo');},_adicionarEventosNavegacao:function(){var self=this;this.itensNavegacaoLi.each(function(i,el){var item=$(this);var bgAtivo=self.itensNavegacaoBgAtivo;var thumbs=self.thumbs;var duracaoAnimacao=self.options.duracaoAnimacao;self._bind(item,'mouseenter',function(){bgAtivo.eq(self.indice).stop().animate(ativoTranslucido);bgAtivo.eq(i).stop().animate(ativoOpaco,{duration:duracaoAnimacao});thumbs.eq(i).show().stop().animate(opaco);});self._bind(item,'mouseleave',function(){bgAtivo.eq(self.indice).stop().animate(ativoOpaco);bgAtivo.eq(i).not(bgAtivo.eq(self.indice)).stop().animate(inativo,{duration:duracaoAnimacao});thumbs.eq(i).stop().animate(invisivel,{complete:function(){$(this).hide();}});});self._bind(item,'click',function(){self.primeiraAnimacao=false;if(self.indice==i){return;}
self.trocaPasso(self.indice,i);});});this._bind(this.itensNavegacao,'click',function(e){e.preventDefault();});},_adicionarEventosHover:function(){var self=this;this._bind(this.element,'mouseenter',function(){self.cancelarCiclo();self.exibeNavegacao();self.destacarTitulo();});this._bind(this.element,'mouseleave',function(){self.iniciarCiclo();self.escondeNavegacao();self.normalizarTitulo();});},incrementaPasso:function(){var indiceAnterior=this.indice;this.indice=(this.indice+1)%this.numeroDePassos;this.trocaPasso(indiceAnterior,this.indice);this.itensNavegacaoBg.eq(indiceAnterior).css(inativo);},trocaPasso:function(indiceAnterior,indiceAtual){this.indice=indiceAtual;this.animacao(indiceAnterior,indiceAtual);},animacao:function(indiceAnterior,indiceAtual){var self=this;var passoAnterior=this.passos.eq(indiceAnterior);var passoAtual=this.passos.eq(indiceAtual);var navegacaoAnterior=this.itensNavegacaoBgAtivo.eq(indiceAnterior);var navegacaoAtual=this.itensNavegacaoBgAtivo.eq(indiceAtual);if(this.primeiraAnimacao){this.itensNavegacao.not(navegacaoAnterior).stop().animate(inativo,{duration:this.options.duracaoAnimacao});this.primeiraAnimacao=false;}
var onNavegacao=function(){self.passos.css('z-index',self.options.zIndex-1);passoAnterior.css('z-index',self.options.zIndex+1);passoAtual.css('z-index',self.options.zIndex).css('opacity','').show();navegacaoAtual.stop().animate(ativo,{duration:self.options.duracaoAnimacao});passoAnterior.stop().animate(invisivel,{duration:self.options.duracaoAnimacao,complete:function(){$(this).hide();}});};navegacaoAnterior.animate(inativoOpaco,{complete:onNavegacao,duration:this.options.duracaoAnimacao});},exibeNavegacao:function(){this.itensNavegacaoBg.stop().animate(ativo,{duration:this.options.duracaoAnimacao});},escondeNavegacao:function(){this.itensNavegacaoBgAtivo.eq(this.indice).stop().animate(ativoOpaco,{duration:this.options.duracaoAnimacao});this.itensNavegacaoBg.not(this.itensNavegacaoBg.eq(this.indice)).stop().animate(inativo,{duration:this.options.duracaoAnimacao});},destacarTitulo:function(){this.tituloFundo.stop().animate(opaco);},normalizarTitulo:function(){this.tituloFundo.stop().animate(semiOpaco);},_bind:function(el,event,fn){el.bind(event+'.'+this.options.identificador,fn);}});$('#glb_carrossel').carrossel();})(this,jQuery);$.widget('glb.boxVideoTriplo',{options:{sitePage:null},lastHover:null,lastOut:null,_create:function(){var elem=this.element.find(".lst-nav a");elem.attr("title","");elem.find("img").attr("alt","");this.thumbHover();this.thumbClick();},animation:function(elem){var pattern=/[0-9]$/,boxChamada=this.element.find(".container-video ul"),posActive=(parseInt(this.element.find(".lst-nav li.on").attr("id").match(pattern),10)),posCurrent=(parseInt(elem.attr("id").match(pattern)[0],10)),elemActive=boxChamada.find("#box-video-"+posActive),target=boxChamada.find("#box-video-"+posCurrent),from=this.lastHover,out=!elem.hasClass("mouseOn");if(!from){from=elemActive;}
if(this.lastOut){this.lastOut.stop(true,true);from.css({zIndex:3,opacity:1});}
if(out){target=elemActive;}
target.css({zIndex:2,opacity:1});if(from.attr("id")!=target.attr("id")){from.animate({opacity:0,easing:"easeOutBounce"},{duration:300,queue:false,complete:function(){from.css({zIndex:1});target.css({zIndex:3,opacity:1});}});}
this.lastHover=target;this.lastOut=from;},thumbHover:function(){var self=this,elem,timeOut;this.element.find(".lst-nav li").hover(function(){elem=$(this);if(!elem.hasClass("on")){clearTimeout(timeOut);elem.addClass("mouseOn");timeOut=setTimeout(function(){self.animation(elem);},200);}},function(){elem=$(this);if(!elem.hasClass("on")){clearTimeout(timeOut);self.element.find(".lst-nav li").removeClass("mouseOn");timeOut=setTimeout(function(){self.animation(elem);},200);}});},thumbClick:function(){var self=this,elemVideo;this.element.find(".lst-nav li").click(function(e){var elem=$(this);if(!elem.hasClass("on")){var preventRefresh=window.preventRefresh;if(preventRefresh&&preventRefresh.prevent){preventRefresh.prevent();}
var elemId=parseInt(elem.attr("id").match(/[0-9]$/),10),boxVideo=self.element.find("#box-video-"+elemId),videoId=self.extractMidiaIdFromVideoUrl(elem.find("a").attr("href")),elemActive=self.element.find(".lst-nav li.on"),sitePage=elem.find("a").attr("rel"),lstVideos=self.element.find(".container-video li");self.element.find("#box-video-1 .play").remove();elemActive.removeClass("on assistindo");elem.addClass("on assistindo");lstVideos.removeAttr("style").removeClass("on");boxVideo.addClass("on");if(elemVideo){elemVideo.html("");}
elemVideo=self.element.find("#box-video-"+elemId+" .player-video").player({videosIDs:videoId,sitePage:sitePage,autoPlay:true,width:288,height:216,complete:"$.glb.boxVideoTriplo.prototype.videoComplete",onPlay:"$.glb.boxVideoTriplo.prototype.videoPlay"});}
e.preventDefault();});this.element.find(".video a").click(function(e){var preventRefresh=window.preventRefresh;if(preventRefresh&&preventRefresh.prevent){preventRefresh.prevent();}
var elem=$(this),pattern=/[0-9]$/,elemId=parseInt(pattern.exec(elem.parents("li").attr("id")),10),sitePage=elem.attr("rel"),videoId=self.extractMidiaIdFromVideoUrl(elem.attr("href"));if(elemVideo){elemVideo.html("");}
self.element.find("#thumb-video-"+elemId).addClass("assistindo");elemVideo=elem.parent().find(".player-video").player({videosIDs:videoId,sitePage:sitePage,autoPlay:true,width:288,height:216,complete:"$.glb.boxVideoTriplo.prototype.videoComplete",onPlay:"$.glb.boxVideoTriplo.prototype.videoPlay"});e.preventDefault();});},videoComplete:function(){var preventRefresh=window.preventRefresh;if(preventRefresh&&preventRefresh.allow){preventRefresh.allow();}
$(".widget-video-triplo .lst-nav").find(".assistindo").removeClass("assistindo");},videoPlay:function(){$(".widget-video-triplo .lst-nav").find(".on").addClass("assistindo");},extractMidiaIdFromVideoUrl:function(videoUrl){if(!videoUrl){return null;}
var m=videoUrl.match(/[A-Z]{3}(\d+)-/);if(!m){m=videoUrl.match(/\/(\d{6,})(\/|$)/);}
if(!m){m=videoUrl.match(/[^\d](\d{6,})[^\d]/);}
return parseInt(m?m[1]:null,10);}});$(".widget-video-triplo").boxVideoTriplo();$(document).ready(function(){var $tchtd=$('#tchtd2');var $imgAtivo=$tchtd.find('.img-destaque');var TechTudoWidgetDinamico={REFRESH_RATE:3000,ANIMATION_DUR:500,init:function(){return this.setup();},setup:function(){var klass=this;var link=$('<a></a>');$tchtd.find('.destaque-categoria').each(function(i){var $this=$(this);var href=$(this).next('.destaque-titulo').attr('href');$this.wrap(link.clone().attr('href',href));}).end().find('.destaque-titulo').each(function(){var $this=$(this);$this.data({'height':$this.outerHeight()});}).hide();$tchtd.find('.box-destaque').mouseenter(function(evt){window.clearInterval(klass.interval);var $target=$(this);if(!$target.hasClass('box-destaque')){$target=$target.parent('.box-destaque');}
klass.marcaSeletor($target).alteraImagem($target);});$tchtd.mouseleave(function(){window.clearInterval(klass.interval);klass.loop(klass.REFRESH_RATE);});this.marcaSeletor($tchtd.find('.box-destaque:first')).alteraImagem($tchtd.find('.box-destaque:first'));this.loop(this.REFRESH_RATE);},loop:function(ms){var klass=this;klass.interval=window.setInterval(function(){var $ativo=klass.getItemAtivo();var $next=$ativo.next('.box-destaque');if($next.size()===0){$next=$tchtd.find('.box-destaque:first');}
klass.marcaSeletor($next).alteraImagem($next);},ms);},alteraImagem:function($el){var href=$el.find('a.destaque-titulo').attr('href');var src=$el.find('a.destaque-foto img').attr('src');var srcAtual=$imgAtivo.find('img').attr('src');if(src!==srcAtual){$imgAtivo.stop().fadeTo('fast',0,function(){$imgAtivo.fadeTo('slow',1).attr('href',href).find('img').attr('src',src).show();});}
return this;},marcaSeletor:function($el){var $ativo=this.getItemAtivo();var klass=this;if($ativo[0]!==$el[0]){this.desmarcaSeletor($ativo);}
if(!$el.hasClass('ativo')){$el.css({backgroundPosition:'-200px 0'}).stop().animate({backgroundPosition:'0 0','height':'72px'},this.ANIMATION_DUR).find('.destaque-titulo').stop(true).delay(this.ANIMATION_DUR*0.8).fadeTo(this.ANIMATION_DUR,1,function(){var index=klass.getElementIndex($el);if(index===0){klass.aplicaSeparador($tchtd.find('.box-destaque').eq(1));}
else if(index==2){klass.aplicaSeparador($tchtd.find('.box-destaque').eq(0));}}).end().addClass('ativo');}
return this;},desmarcaSeletor:function($el){this.removeSeparadores();$el.removeClass('ativo').stop().animate({backgroundPosition:'-200px 0','height':'14px'},this.ANIMATION_DUR,function(){$(this).removeClass('ativo');}).find('.destaque-titulo').stop(true).delay(this.ANIMATION_DUR*0.8).fadeTo(this.ANIMATION_DUR,0);return this;},aplicaSeparador:function($el){if(!$el.hasClass('.ativo')){$el.addClass('separador').css({'background-position':'50% 100%'});}
return this;},removeSeparadores:function(){$tchtd.find('.separador').removeClass('separador').css({'background-position':'-200px 0'});return this;},getItemAtivo:function(){return $tchtd.find('.box-destaque.ativo');},getElementIndex:function($el){return $tchtd.find('.box-destaque').index($el);}};TechTudoWidgetDinamico.init();});